name: YouTube Live Stream

on:
  workflow_dispatch: # Cháº¡y thá»§ cÃ´ng tá»« tab Actions

jobs:
  stream:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: CÃ i Ä‘áº·t gdown vÃ  ffmpeg
      run: |
        sudo apt-get update
        sudo apt-get install -y ffmpeg
        pip install gdown

    - name: Táº£i video tá»« Google Drive
      run: |
        echo "ğŸ“¥ Äang táº£i video tá»« Google Drive..."
        gdown "https://drive.google.com/uc?id=${{ secrets.GDRIVE_FILE_ID }}" -O video.mp4

    - name: Stream lÃªn YouTube (loop vÃ´ háº¡n)
      run: |
        echo "ğŸš€ Báº¯t Ä‘áº§u phÃ¡t trá»±c tiáº¿p..."
        ffmpeg -re -stream_loop -1 -i video.mp4 \
        -c copy -f flv "rtmp://a.rtmp.youtube.com/live2/${{ secrets.YT_STREAM_KEY }}"
